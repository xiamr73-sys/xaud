C51 COMPILER V9.52.0.0   AMP                                                               12/02/2025 15:24:48 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE AMP
OBJECT MODULE PLACED IN .\Output\AMP.obj
COMPILER INVOKED BY: E:\tools\keil4\C51\BIN\C51.EXE ..\User\source\Hardware\AMP.c LARGE OMF2 WARNINGLEVEL(0) BROWSE FLOA
                    -TFUZZY(4) INCDIR(..\User\include;..\FU68xx_Haidware_Driver\Include) DEBUG PRINT(.\Listings\AMP.lst) TABS(2) OBJECT(.\Out
                    -put\AMP.obj)

line level    source

   1          /*  --------------------------- (C) COPYRIGHT 2020 Fortiortech ShenZhen -----------------------------
   2              File Name      : AMP.c
   3              Author         : Fortiortech  Appliction Team
   4              Version        : V1.0
   5              Date           : 2020-04-11
   6              Description    : This file contains .C file function used for Motor Control.
   7              ----------------------------------------------------------------------------------------------------
   8                                                 All Rights Reserved
   9              ------------------------------------------------------------------------------------------------- */
  10          #include "Myproject.h"
  11          
  12          /*  -------------------------------------------------------------------------------------------------
  13              Function Name : void AMP_Init(void)
  14              Description   : AMPхИЭхзЛхМЦщЕНч╜о,ф╜┐шГ╜ш┐РцФ╛чФ╡хОЛVHALFя╝МщЕНч╜ош┐РцФ╛чЪДчФ╡ц╡БщЗЗца╖цнгхРСш╛УхЕея╝
             -МхПНхРСш╛УхЕехТМш╛УхЗ║я╝МхМЕцЛмI_BUS,I_U,I_V
  15                              х╣╢ф╜┐шГ╜хп╣х║ФчЪДш┐РцФ╛
  16              Input         : цЧа
  17              Output                :   цЧа
  18              -------------------------------------------------------------------------------------------------*/
  19          
  20          void AMP_Init(void)
  21          {
  22   1          #if (Shunt_Resistor_Mode == Single_Resistor)
                  {
                      /*****AMP члпхПгцибцЛЯхКЯшГ╜шо╛ч╜о******/
                      SetBit(P3_AN, P31);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  +
                      SetBit(P3_AN, P30);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  -
                      SetBit(P2_AN, P27);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  O
                      
                      SetBit(AMP_CR, AMP0EN);         //AMP0 Enable
                  }
                  #elif (Shunt_Resistor_Mode == Double_Resistor)
  32   1          {
  33   2              /*****AMP члпхПгцибцЛЯхКЯшГ╜шо╛ч╜о******/
  34   2              SetBit(P3_AN, P31);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  +
  35   2              SetBit(P3_AN, P30);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  -
  36   2              SetBit(P2_AN, P27);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  O
  37   2          
  38   2              SetBit(P1_AN, P16);             //AMP1 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  +
  39   2              SetBit(P1_AN, P17);             //AMP1 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  -
  40   2              SetBit(P2_AN, P20);             //AMP1 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  O
  41   2          
  42   2              SetBit(P2_AN, P21);             //AMP2 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  +
  43   2              SetBit(P2_AN, P22);             //AMP2 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  -
  44   2              SetBit(P2_AN, P23);             //AMP2 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  O
  45   2              ClrBit(P2_OE, P23);             //P23_OEщЬАшжБх╝║хИ╢ф╕║0я╝МчжБцнвDA1ш╛УхЗ║шЗ│PAD
  46   2          
  47   2              SetBit(AMP_CR, AMP0EN);         //AMP0 Enable
  48   2              SetBit(AMP_CR, AMP1EN);         //AMP1 Enable
  49   2              SetBit(AMP_CR, AMP2EN);         //AMP2 Enable
  50   2          }
  51   1          #elif (Shunt_Resistor_Mode == Three_Resistor)
                  {
C51 COMPILER V9.52.0.0   AMP                                                               12/02/2025 15:24:48 PAGE 2   

                      SetBit(P3_AN, P31);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  +
                      SetBit(P3_AN, P30);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  -
                      SetBit(P2_AN, P27);             //AMP0 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  O
                  
                      SetBit(P1_AN, P16);             //AMP1 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  +
                      SetBit(P1_AN, P17);             //AMP1 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  -
                      SetBit(P2_AN, P20);             //AMP1 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  O
                  
                      SetBit(P2_AN, P21);             //AMP2 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  +
                      SetBit(P2_AN, P22);             //AMP2 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  -
                      SetBit(P2_AN, P23);             //AMP2 Pinшо╛ч╜оф╕║цибцЛЯцибх╝П  O
                      ClrBit(P2_OE, P23);             //P23_OEщЬАшжБх╝║хИ╢ф╕║0я╝МчжБцнвDA1ш╛УхЗ║шЗ│PAD
                  
                      SetBit(AMP_CR, AMP0EN);         //AMP0 Enable
                      SetBit(AMP_CR, AMP1EN);         //AMP1 Enable
                      SetBit(AMP_CR, AMP2EN);         //AMP2 Enable
                  }
                  #endif
  71   1          
  72   1      
  73   1              ClrBit(AMP0_GAIN, AMP0_GAIN2);  //0x80
  74   1              ClrBit(AMP0_GAIN, AMP0_GAIN1);  //0x40
  75   1              ClrBit(AMP0_GAIN, AMP0_GAIN0);  //0x20
  76   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     80    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
